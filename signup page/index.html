<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./vars.css">
  <link rel="stylesheet" href="./style.css">
  
  
  <style>
   a,
   button,
   input,
   select,
   h1,
   h2,
   h3,
   h4,
   h5,
   * {
       box-sizing: border-box;
       margin: 0;
       padding: 0;
       border: none;
       text-decoration: none;
       background: none;
   
       -webkit-font-smoothing: antialiased;
   }
   
   menu, ol, ul {
       list-style-type: none;
       margin: 0;
       padding: 0;
   }
   </style>
  <title>Document</title>
</head>
<body>
  <div class="desktop-2">
    <div class="frame-1">
      <div class="rectangle-1"></div>
      <div class="sign-up">Sign up</div>
      <div
        class="welcome-back-sign-in-to-access-your-personalized-dashboard-track-your-meals-and-calories-get-diet-suggestions-tailored-to-your-goals-and-stay-motivated-on-your-fitness-journey"
      >
        <span>
          <span
            class="welcome-back-sign-in-to-access-your-personalized-dashboard-track-your-meals-and-calories-get-diet-suggestions-tailored-to-your-goals-and-stay-motivated-on-your-fitness-journey-span"
          >
            Welcome back.
            <br />
          </span>
          <span
            class="welcome-back-sign-in-to-access-your-personalized-dashboard-track-your-meals-and-calories-get-diet-suggestions-tailored-to-your-goals-and-stay-motivated-on-your-fitness-journey-span2"
          >
            <br />
          </span>
          <span
            class="welcome-back-sign-in-to-access-your-personalized-dashboard-track-your-meals-and-calories-get-diet-suggestions-tailored-to-your-goals-and-stay-motivated-on-your-fitness-journey-span3"
          >
            Sign in to access your personalized dashboard, track your meals and
            calories,
            <br />
            get diet suggestions tailored to your goals, and stay motivated on
            your fitness journey.
          </span>
        </span>
      </div>
      <img class="diet-plan-1-1" src="diet-plan-1-10.png" />
      <div class="create-your-account">Create Your AccountÂ </div>
      <img class="image-1" src="image-10.png" />
      <div class="input-field">
        <label class="label" for="name">Full Name:<span class="required"></span></label>
        <input class="input" type="text" id="name" name="name" placeholder="Enter your name" required>
      </div>
    
      <div class="input-field2">
        <label class="label" for="email">Email:<span class="required"></span></label>
        <input class="input" type="email" id="email" name="email" placeholder="Enter your email" required>
      </div>
    
      <div class="input-field3">
        <label class="label" for="age">Age:<span class="required"></span></label>
        <input class="input" type="number" id="age" name="age" placeholder="Enter your age" min="0" required>
      </div>
    
      <div class="input-field4">
        <label class="label" for="password">Password:<span class="required"></span></label>
        <input class="input" type="password" id="password" name="password" placeholder="Create password" required>
      </div>
    
      <div class="input-field5">
        <label class="label" for="confirm-password">Confirm Password:<span class="required"></span></label>
        <input class="input" type="password" id="confirm-password" name="confirm_password" placeholder="Re-enter password" required>
      </div>
    
      <div class="input-field6">
        <label class="label" for="gender">Gender:<span class="required"></span></label>
        <select class="input" id="gender" name="gender" required>
          <option value="">Select Gender</option>
          <option value="female">Female</option>
          <option value="male">Male</option>
          <option value="other">Other</option>
        </select>
      </div>

      <button class="button" type="submit" style="display: block;">
        <div class="button2">Sign up</div>
      </button>
    
      <div class="join-us-and-turn-every-meal-into-a-step-toward-a-healthier-you">
        Join us and turn every meal into a step toward a healthier you. ðŸŒ¿
      </div>
      <div class="input-field7">
        <label class="label" for="height">Height (cm):<span class="required"></span></label>
        <input class="input" type="number" id="height" name="height" placeholder="Enter your height" required>
      </div>
    
      <div class="input-field8">
        <label class="label" for="weight">Weight (kg):<span class="required"></span></label>
        <input class="input" type="number" id="weight" name="weight" placeholder="Enter your weight" required>
      </div>
      <div class="checkboxes">
        <label class="checkbox-container">
          <input type="checkbox" name="checkbox" id="checkbox" required />
          <span class="checkmark"></span>
         
        </label>
      </div>
      
    <img class="image-1-photoroom-1" src="image-1-photoroom-10.png" />
  </div>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    // Initialize Supabase
    const client = supabase.createClient(
      'https://eqgcynoaryjcdqkuxlhz.supabase.co', // replace with your Supabase URL
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVxZ2N5bm9hcnlqY2Rxa3V4bGh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5NjQ2NzcsImV4cCI6MjA2MDU0MDY3N30.ZED28FpdAkwFB5izYSlMDVnY31rGbIZey3fbVT3-CEY'                      // replace with your Supabase public anon key
    );
  
    // Listen to the sign-up button click
    document.querySelector('.button').addEventListener('click', async (e) => {
      e.preventDefault(); // prevent default anchor behavior
  
      // Get form values
      const fullName = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const age = parseInt(document.getElementById('age').value);
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirm-password').value;
      const gender = document.getElementById('gender').value;
      const height = parseFloat(document.getElementById('height').value);
      const weight = parseFloat(document.getElementById('weight').value);
      const checkbox = document.getElementById('checkbox').checked;
  
      if (!checkbox) {
        alert('Please agree to the terms.');
        return;
      }
  
      if (password !== confirmPassword) {
        alert('Passwords do not match.');
        return;
      }
  
      try {
        // Create user with email & password
        const { data: signUpData, error: signUpError } = await client.auth.signUp({
          email: email,
          password: password,
        });
  
        if (signUpError) {
          alert(signUpError.message);
          return;
        }
  
        // Insert extra details into "User's Data" table
        const { data: userData, error: userDataError } = await client
          .from('User\'s Data') // Use the correct table name
          .insert([{
            id: signUpData.user.id, // user ID from auth
            full_name: fullName,
            email: email,
            age: age,
            password: password, // Not recommended to store raw password
            gender: gender,
            height: height,
            weight: weight
          }]);
  
        if (userDataError) {
          alert(userDataError.message);
          return;
        }
  
        // Redirect to dashboard
        window.location.href = '/dashboard/dashboard.html';
  
      } catch (error) {
        console.error('Unexpected error:', error.message);
      }
    });
  </script>
  
</body>
</html>